"use strict";

var _require = require('../helpers/constants'),
    URI = _require.URI;

var HTTP_METHODS = require('../helpers/http_methods');

var _require2 = require('../helpers/request_handler'),
    requestHandler = _require2.requestHandler;

var webhookMethods = function webhookMethods(bucket_config) {
  return {
    getWebhooks: function getWebhooks() {
      var endpoint = "".concat(URI, "/").concat(bucket_config.slug, "/webhooks");
      return requestHandler(HTTP_METHODS.GET, endpoint);
    },
    addWebhook: function addWebhook(params) {
      var endpoint = "".concat(URI, "/").concat(bucket_config.slug, "/webhooks");

      if (bucket_config.write_key) {
        params.write_key = bucket_config.write_key;
      }

      return requestHandler(HTTP_METHODS.POST, endpoint, params);
    },
    deleteWebhook: function deleteWebhook(params) {
      var endpoint = "".concat(URI, "/").concat(bucket_config.slug, "/webhooks/").concat(params.id);
      return requestHandler(HTTP_METHODS.DELETE, endpoint, bucket_config);
    }
  };
};

module.exports = webhookMethods;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9idWNrZXQvd2ViaG9vay5qcyJdLCJuYW1lcyI6WyJyZXF1aXJlIiwiVVJJIiwiSFRUUF9NRVRIT0RTIiwicmVxdWVzdEhhbmRsZXIiLCJ3ZWJob29rTWV0aG9kcyIsImJ1Y2tldF9jb25maWciLCJnZXRXZWJob29rcyIsImVuZHBvaW50Iiwic2x1ZyIsIkdFVCIsImFkZFdlYmhvb2siLCJwYXJhbXMiLCJ3cml0ZV9rZXkiLCJQT1NUIiwiZGVsZXRlV2ViaG9vayIsImlkIiwiREVMRVRFIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7ZUFBZ0JBLE9BQU8sQ0FBQyxzQkFBRCxDO0lBQWZDLEcsWUFBQUEsRzs7QUFDUixJQUFNQyxZQUFZLEdBQUdGLE9BQU8sQ0FBQyx5QkFBRCxDQUE1Qjs7Z0JBQzJCQSxPQUFPLENBQUMsNEJBQUQsQztJQUExQkcsYyxhQUFBQSxjOztBQUVSLElBQU1DLGNBQWMsR0FBRyxTQUFqQkEsY0FBaUIsQ0FBQ0MsYUFBRDtBQUFBLFNBQW9CO0FBQ3pDQyxJQUFBQSxXQUFXLEVBQUUsdUJBQU07QUFDakIsVUFBTUMsUUFBUSxhQUFNTixHQUFOLGNBQWFJLGFBQWEsQ0FBQ0csSUFBM0IsY0FBZDtBQUNBLGFBQU9MLGNBQWMsQ0FBQ0QsWUFBWSxDQUFDTyxHQUFkLEVBQW1CRixRQUFuQixDQUFyQjtBQUNELEtBSndDO0FBS3pDRyxJQUFBQSxVQUFVLEVBQUUsb0JBQUNDLE1BQUQsRUFBWTtBQUN0QixVQUFNSixRQUFRLGFBQU1OLEdBQU4sY0FBYUksYUFBYSxDQUFDRyxJQUEzQixjQUFkOztBQUNBLFVBQUlILGFBQWEsQ0FBQ08sU0FBbEIsRUFBNkI7QUFDM0JELFFBQUFBLE1BQU0sQ0FBQ0MsU0FBUCxHQUFtQlAsYUFBYSxDQUFDTyxTQUFqQztBQUNEOztBQUNELGFBQU9ULGNBQWMsQ0FBQ0QsWUFBWSxDQUFDVyxJQUFkLEVBQW9CTixRQUFwQixFQUE4QkksTUFBOUIsQ0FBckI7QUFDRCxLQVh3QztBQVl6Q0csSUFBQUEsYUFBYSxFQUFFLHVCQUFDSCxNQUFELEVBQVk7QUFDekIsVUFBTUosUUFBUSxhQUFNTixHQUFOLGNBQWFJLGFBQWEsQ0FBQ0csSUFBM0IsdUJBQTRDRyxNQUFNLENBQUNJLEVBQW5ELENBQWQ7QUFDQSxhQUFPWixjQUFjLENBQUNELFlBQVksQ0FBQ2MsTUFBZCxFQUFzQlQsUUFBdEIsRUFBZ0NGLGFBQWhDLENBQXJCO0FBQ0Q7QUFmd0MsR0FBcEI7QUFBQSxDQUF2Qjs7QUFrQkFZLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmQsY0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IFVSSSB9ID0gcmVxdWlyZSgnLi4vaGVscGVycy9jb25zdGFudHMnKVxuY29uc3QgSFRUUF9NRVRIT0RTID0gcmVxdWlyZSgnLi4vaGVscGVycy9odHRwX21ldGhvZHMnKVxuY29uc3QgeyByZXF1ZXN0SGFuZGxlciB9ID0gcmVxdWlyZSgnLi4vaGVscGVycy9yZXF1ZXN0X2hhbmRsZXInKVxuXG5jb25zdCB3ZWJob29rTWV0aG9kcyA9IChidWNrZXRfY29uZmlnKSA9PiAoe1xuICBnZXRXZWJob29rczogKCkgPT4ge1xuICAgIGNvbnN0IGVuZHBvaW50ID0gYCR7VVJJfS8ke2J1Y2tldF9jb25maWcuc2x1Z30vd2ViaG9va3NgXG4gICAgcmV0dXJuIHJlcXVlc3RIYW5kbGVyKEhUVFBfTUVUSE9EUy5HRVQsIGVuZHBvaW50KVxuICB9LFxuICBhZGRXZWJob29rOiAocGFyYW1zKSA9PiB7XG4gICAgY29uc3QgZW5kcG9pbnQgPSBgJHtVUkl9LyR7YnVja2V0X2NvbmZpZy5zbHVnfS93ZWJob29rc2BcbiAgICBpZiAoYnVja2V0X2NvbmZpZy53cml0ZV9rZXkpIHtcbiAgICAgIHBhcmFtcy53cml0ZV9rZXkgPSBidWNrZXRfY29uZmlnLndyaXRlX2tleVxuICAgIH1cbiAgICByZXR1cm4gcmVxdWVzdEhhbmRsZXIoSFRUUF9NRVRIT0RTLlBPU1QsIGVuZHBvaW50LCBwYXJhbXMpXG4gIH0sXG4gIGRlbGV0ZVdlYmhvb2s6IChwYXJhbXMpID0+IHtcbiAgICBjb25zdCBlbmRwb2ludCA9IGAke1VSSX0vJHtidWNrZXRfY29uZmlnLnNsdWd9L3dlYmhvb2tzLyR7cGFyYW1zLmlkfWBcbiAgICByZXR1cm4gcmVxdWVzdEhhbmRsZXIoSFRUUF9NRVRIT0RTLkRFTEVURSwgZW5kcG9pbnQsIGJ1Y2tldF9jb25maWcpXG4gIH1cbn0pXG5cbm1vZHVsZS5leHBvcnRzID0gd2ViaG9va01ldGhvZHNcbiJdfQ==